(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(o,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),n=t(2);var l=function(){const[o,e]=Object(r.useState)({gameId:"",board:Array(8).fill(null).map(()=>Array(8).fill("")),currentPlayer:"red",status:"active",createdAt:"",updatedAt:""}),[t,n]=Object(r.useState)(null),[l,s]=Object(r.useState)([]),c="https://w9cqnnyhbi.execute-api.us-east-1.amazonaws.com/prod",i=(e,t)=>{const r=o.board[e][t];if(console.log("Calculating moves for piece:",{row:e,col:t,piece:r,isKing:r===r.toUpperCase()}),!r)return[];const a=r===r.toUpperCase(),n=[],l=[];"r"===r.toLowerCase()?l.push(-1):"b"===r.toLowerCase()&&l.push(1),a&&(l.includes(-1)||l.push(-1),l.includes(1)||l.push(1)),console.log("Movement directions:",l);const s=[];for(const u of l)for(const a of[-1,1]){var c,i;const n=e+u,l=t+a,d=e+2*u,p=t+2*a;if(console.log("Checking jump:",{from:{row:e,col:t},over:{row:n,col:l,piece:null===(c=o.board[n])||void 0===c?void 0:c[l]},to:{row:d,col:p,piece:null===(i=o.board[d])||void 0===i?void 0:i[p]}}),d<0||d>7||p<0||p>7){console.log("Jump out of bounds");continue}const m=o.board[n][l];if(!m){console.log("No piece to jump over");continue}if(o.board[d][p]){console.log("Landing square occupied");continue}const g="r"===r.toLowerCase()&&"b"===m.toLowerCase()||"b"===r.toLowerCase()&&"r"===m.toLowerCase();console.log("Jump validation:",{isOpponentPiece:g,isBlackSquare:(d+p)%2===1}),g&&(d+p)%2===1&&(s.push({row:d,col:p}),console.log("Valid jump found:",{row:d,col:p}))}if(s.length>0)return console.log("Mandatory jumps found:",s),s;for(const u of l)for(const r of[-1,1]){var d;const a=e+u,l=t+r;console.log("Checking regular move:",{from:{row:e,col:t},to:{row:a,col:l,piece:null===(d=o.board[a])||void 0===d?void 0:d[l]}}),a<0||a>7||l<0||l>7?console.log("Move out of bounds"):o.board[a][l]?console.log("Destination square occupied"):(a+l)%2===1&&(n.push({row:a,col:l}),console.log("Valid move found:",{row:a,col:l}))}return console.log("Final valid moves:",n),n};return a.a.createElement("div",{className:"App",style:{padding:"20px",textAlign:"center"}},a.a.createElement("h1",null,"Checkers Game"),a.a.createElement("div",{className:"game-status",style:{fontSize:"1.5em",marginBottom:"20px",fontWeight:"bold",color:"finished"===o.status?"#4CAF50":"#2196F3"}},(()=>{return o.gameId?"finished"===o.status?"Game Over! ".concat(null===(e=o.winner)||void 0===e?void 0:e.toUpperCase()," wins! \ud83c\udf89"):"Current Turn: ".concat(o.currentPlayer.toUpperCase()):"Click 'New Game' to start playing!";var e})()),a.a.createElement("div",{className:"game-board",style:{display:"inline-block",border:"2px solid #333",backgroundColor:"#fff"}},o.board.map((r,d)=>a.a.createElement("div",{key:d,className:"board-row",style:{display:"flex"}},r.map((r,u)=>{const p=(d+u)%2===1,m=(null===t||void 0===t?void 0:t.row)===d&&(null===t||void 0===t?void 0:t.col)===u,g=l.some(o=>o.row===d&&o.col===u);return a.a.createElement("div",{key:u,onClick:()=>(async(r,a)=>{var d,u;if(!o.gameId||"finished"===o.status)return;const p=null===(d=o.board)||void 0===d?void 0:null===(u=d[r])||void 0===u?void 0:u[a];if(console.log("Clicked square:",{row:r,col:a,piece:p}),console.log("Game state:",{currentPlayer:o.currentPlayer,selectedSquare:t,validMoves:l}),!t){if(!p)return void console.log("Clicked empty square");if(!("red"===o.currentPlayer&&"r"===p.toLowerCase()||"black"===o.currentPlayer&&"b"===p.toLowerCase()))return void alert("You can only move your own pieces!");const e=i(r,a);return console.log("Calculated valid moves:",e),0===e.length?void alert("This piece has no valid moves!"):(n({row:r,col:a,piece:p}),void s(e))}if(t.row===r&&t.col===a)return console.log("Deselecting piece"),n(null),void s([]);const m=l.some(o=>o.row===r&&o.col===a);if(console.log("Move validation:",{isValidDestination:m,selectedSquare:t,targetSquare:{row:r,col:a}}),!m)return console.log("Invalid move - not in valid moves list"),n(null),void s([]);try{const l={fromRow:t.row,fromCol:t.col,toRow:r,toCol:a};console.log("Sending move to API:",l);const d=await fetch("".concat(c,"/games/").concat(o.gameId),{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"cors",body:JSON.stringify(l)});if(!d.ok){const o=await d.json();throw console.error("API Error:",{status:d.status,statusText:d.statusText,errorData:o}),new Error(o.error||"Invalid move")}const u=await d.json();console.log("Move successful:",u),e(u),u.hasMoreJumps?(n({row:r,col:a,piece:u.board[r][a]}),s(i(r,a))):(n(null),s([]))}catch(g){console.error("Error making move:",g),alert(g instanceof Error?g.message:"Invalid move. Please try again."),n(null),s([])}})(d,u),style:{width:"60px",height:"60px",backgroundColor:p?"#666":"#fff",border:m?"3px solid yellow":"1px solid #999",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",position:"relative",boxSizing:"border-box"}},r&&a.a.createElement("div",{style:{width:"80%",height:"80%",borderRadius:"50%",backgroundColor:"r"===r.toLowerCase()?"#ff4444":"#333",border:"2px solid #fff",boxShadow:"0 0 10px rgba(0,0,0,0.3)",position:"relative"}},r===r.toUpperCase()&&a.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"r"===r.toLowerCase()?"#ffcccc":"#666",fontSize:"24px"}},"\u2654")),g&&a.a.createElement("div",{style:{position:"absolute",width:"20px",height:"20px",borderRadius:"50%",backgroundColor:"rgba(0, 255, 0, 0.5)",border:"2px solid rgba(0, 255, 0, 0.8)"}}))})))),a.a.createElement("div",{style:{marginTop:"20px"}},a.a.createElement("button",{onClick:async()=>{try{const t=await fetch("".concat(c,"/games"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"cors"});if(!t.ok)throw new Error("Failed to create game");const r=await t.json();if(console.log("API Response:",r),"string"===typeof r){const o=JSON.parse(r);console.log("Parsed new game state:",o),e(o)}else console.log("Setting game state directly:",r),e(r);n(null),s([])}catch(o){console.error("Error creating game:",o),alert("Failed to create new game. Please try again.")}},style:{padding:"10px 20px",fontSize:"16px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginBottom:"20px"}},"finished"===o.status?"Play Again":o.gameId?"Restart Game":"New Game")))};t.n(n).a.createRoot(document.getElementById("root")).render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(l,null)))},3:function(o,e,t){o.exports=t(12)}},[[3,1,2]]]);
//# sourceMappingURL=main.6f0ad50e.chunk.js.map