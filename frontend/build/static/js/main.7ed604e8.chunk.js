(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(o,e,t){"use strict";t.r(e);var r=t(0),n=t.n(r),l=t(3),a=t.n(l),c=t(1);var s=function(){const[o,e]=Object(r.useState)(null),[t,l]=Object(r.useState)(null),[a,s]=Object(r.useState)([]),[i,d]=Object(r.useState)(null),u="https://w9cqnnyhbi.execute-api.us-east-1.amazonaws.com/prod",p=e=>{let t=0;for(let r=0;r<8;r++)for(let n=0;n<8;n++){const l=null===o||void 0===o?void 0:o.board[r][n];l&&l.toLowerCase()===e&&t++}return t},m=(e,t)=>{if(!o)return[];const r=o.board[e][t];if(!r)return[];console.log("Calculating moves for piece:",{row:e,col:t,piece:r,isKing:r===r.toUpperCase(),isBlackSquare:(e+t)%2===0});const n=r===r.toUpperCase(),l=[],a=[];"r"===r.toLowerCase()?a.push(-1):"b"===r.toLowerCase()&&a.push(1),n&&(a.includes(-1)||a.push(-1),a.includes(1)||a.push(1)),console.log("Movement directions:",a);const c=[];for(const i of a)for(const n of[-1,1]){var s;const l=e+i,a=t+n,d=e+2*i,u=t+2*n;if(console.log("Checking jump:",{from:{row:e,col:t},over:{row:l,col:a,piece:null===o||void 0===o?void 0:null===(s=o.board[l])||void 0===s?void 0:s[a]},to:{row:d,col:u},isBlackSquare:(d+u)%2===0}),d<0||d>7||u<0||u>7){console.log("Jump out of bounds");continue}const p=null===o||void 0===o?void 0:o.board[l][a];if(!p){console.log("No piece to jump over");continue}if(null===o||void 0===o?void 0:o.board[d][u]){console.log("Landing square occupied");continue}const m="r"===r.toLowerCase()&&"b"===p.toLowerCase()||"b"===r.toLowerCase()&&"r"===p.toLowerCase();console.log("Jump validation:",{isOpponentPiece:m,isBlackSquare:(d+u)%2===0}),m&&(d+u)%2===0&&(c.push({row:d,col:u}),console.log("Valid jump found:",{row:d,col:u}))}if(c.length>0)return console.log("Mandatory jumps found:",c),c;for(const i of a)for(const r of[-1,1]){const n=e+i,a=t+r;if(console.log("Checking regular move:",{from:{row:e,col:t},to:{row:n,col:a},isBlackSquare:(n+a)%2===0}),n<0||n>7||a<0||a>7){console.log("Move out of bounds");continue}if(null===o||void 0===o?void 0:o.board[n][a]){console.log("Destination square occupied");continue}const c=(n+a)%2===0;console.log("Square color check:",{newRow:n,newCol:a,sum:n+a,isBlackSquare:c}),c?(l.push({row:n,col:a}),console.log("Valid move found:",{row:n,col:a})):console.log("Not a black square")}return console.log("Final valid moves:",l),l},f=async(r,n)=>{if(t&&o)try{const i=await fetch("".concat(u,"/games/").concat(o.gameId),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({fromRow:t.row,fromCol:t.col,toRow:r,toCol:n})});if(!i.ok)throw new Error("Failed to make move");const f=await i.json();if(e(f),2===Math.abs(r-t.row)){const e=m(r,n).filter(o=>2===Math.abs(o.row-r));if(e.length>0){const a={row:r,col:n,piece:o.board[t.row][t.col]};return l(a),s(e),void d(a)}}l(null),s([]),d(null);const g=(()=>{const o=p("r"),e=p("b");return console.log("Piece count:",{red:o,black:e}),0===o?"black":0===e?"red":null})();g&&e(Object(c.a)(Object(c.a)({},f),{},{status:"finished",winner:g}))}catch(a){console.error("Error making move:",a)}};return n.a.createElement("div",{className:"App",style:{padding:"20px",textAlign:"center"}},n.a.createElement("h1",null,"Checkers Game"),n.a.createElement("div",{className:"game-status",style:{fontSize:"1.5em",marginBottom:"20px",fontWeight:"bold",color:"finished"===(null===o||void 0===o?void 0:o.status)?"#4CAF50":"#2196F3"}},o?"finished"===o.status&&o.winner?"Game Over - ".concat(o.winner.charAt(0).toUpperCase()+o.winner.slice(1)," Wins!"):"Current Turn: ".concat(o.currentPlayer.charAt(0).toUpperCase()+o.currentPlayer.slice(1)):"Click 'New Game' to start playing!"),n.a.createElement("div",{className:"game-board",style:{display:"inline-block",border:"2px solid #333",backgroundColor:"#fff"}},null===o||void 0===o?void 0:o.board.map((e,r)=>n.a.createElement("div",{key:r,className:"board-row",style:{display:"flex"}},e.map((e,c)=>{const d=(r+c)%2===0,u=(null===t||void 0===t?void 0:t.row)===r&&(null===t||void 0===t?void 0:t.col)===c,p=a.some(o=>o.row===r&&o.col===c);return n.a.createElement("div",{key:c,onClick:()=>((e,r)=>{if(!o)return;const n=o.board[e][r];if(console.log("Clicked square:",{row:e,col:r,piece:n}),console.log("Game state:",{currentPlayer:o.currentPlayer,selectedSquare:t,validMoves:a}),!i||e===i.row&&r===i.col||(null===n||void 0===n?void 0:n.toLowerCase())!==o.currentPlayer[0])if(n&&n.toLowerCase()===o.currentPlayer[0]){l({row:e,col:r,piece:n});const o=m(e,r);s(o),console.log("Calculated valid moves:",o)}else t&&a.some(o=>o.row===e&&o.col===r)?f(e,r):(l(null),s([]));else console.log("Must continue jump with piece at:",i)})(r,c),style:{width:"60px",height:"60px",backgroundColor:d?"#666":"#fff",border:u?"3px solid yellow":"1px solid #999",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",position:"relative",boxSizing:"border-box"}},e&&n.a.createElement("div",{style:{width:"80%",height:"80%",borderRadius:"50%",backgroundColor:"r"===e.toLowerCase()?"#ff4444":"#333",border:"2px solid #fff",boxShadow:"0 0 10px rgba(0,0,0,0.3)",position:"relative"}},e===e.toUpperCase()&&n.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"r"===e.toLowerCase()?"#ffcccc":"#666",fontSize:"24px"}},"\u2654")),p&&n.a.createElement("div",{style:{position:"absolute",width:"20px",height:"20px",borderRadius:"50%",backgroundColor:"rgba(0, 255, 0, 0.5)",border:"2px solid rgba(0, 255, 0, 0.8)"}}))})))),n.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px"}},n.a.createElement("button",{onClick:async()=>{try{const t=await fetch("".concat(u,"/games"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"cors"});if(!t.ok)throw new Error("Failed to create game");const r=await t.json();if(console.log("API Response:",r),"string"===typeof r){const o=JSON.parse(r);console.log("Parsed new game state:",o),e(o)}else console.log("Setting game state directly:",r),e(r);l(null),s([])}catch(o){console.error("Error creating game:",o),alert("Failed to create new game. Please try again.")}},style:{padding:"10px 20px",fontSize:"1.2em",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginBottom:"20px"}},o?"finished"===o.status?"Play Again":"Restart Game":"New Game")))};a.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(s,null)))},4:function(o,e,t){o.exports=t(13)}},[[4,1,2]]]);
//# sourceMappingURL=main.7ed604e8.chunk.js.map