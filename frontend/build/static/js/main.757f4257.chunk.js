(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,o,t){"use strict";t.r(o);var r=t(0),a=t.n(r),n=t(2);var s=function(){const[e,o]=Object(r.useState)({gameId:"",board:Array(8).fill(null).map(()=>Array(8).fill("")),currentPlayer:"red",status:"active",createdAt:"",updatedAt:""}),[t,n]=Object(r.useState)(null),[s,l]=Object(r.useState)([]),i="https://rd2ll5az83.execute-api.us-east-1.amazonaws.com/prod",c=(o,t)=>{const r=e.board[o][t];if(!r)return[];const a=r===r.toUpperCase(),n=[],s=[];("r"===r.toLowerCase()||a)&&s.push(-1),("b"===r.toLowerCase()||a)&&s.push(1);for(const l of s)for(const r of[-1,1]){const a=o+l,s=t+r;a<0||a>7||s<0||s>7||e.board[a][s]||(a+s)%2===1&&n.push({row:a,col:s})}for(const l of s)for(const a of[-1,1]){const s=o+l,i=t+a,c=o+2*l,d=t+2*a;if(c<0||c>7||d<0||d>7)continue;if(!e.board[s][i])continue;if(e.board[c][d])continue;const u=e.board[s][i];("r"===r.toLowerCase()&&"b"===u.toLowerCase()||"b"===r.toLowerCase()&&"r"===u.toLowerCase())&&(c+d)%2===1&&n.push({row:c,col:d})}return n};return a.a.createElement("div",{className:"App",style:{padding:"20px",textAlign:"center"}},a.a.createElement("h1",null,"Checkers Game"),a.a.createElement("div",{className:"game-status",style:{fontSize:"1.5em",marginBottom:"20px",fontWeight:"bold",color:"finished"===e.status?"#4CAF50":"#2196F3"}},(()=>{return e.gameId?"finished"===e.status?"Game Over! ".concat(null===(o=e.winner)||void 0===o?void 0:o.toUpperCase()," wins! \ud83c\udf89"):"Current Turn: ".concat(e.currentPlayer.toUpperCase()):"Click 'New Game' to start playing!";var o})()),a.a.createElement("div",{className:"game-board",style:{display:"inline-block",border:"2px solid #333",backgroundColor:"#fff"}},e.board.map((r,d)=>a.a.createElement("div",{key:d,className:"board-row",style:{display:"flex"}},r.map((r,u)=>{const p=(d+u)%2===1,m=(null===t||void 0===t?void 0:t.row)===d&&(null===t||void 0===t?void 0:t.col)===u,f=s.some(e=>e.row===d&&e.col===u);return a.a.createElement("div",{key:u,onClick:()=>(async(r,a)=>{var d,u;if(!e.gameId||"finished"===e.status)return;const p=null===(d=e.board)||void 0===d?void 0:null===(u=d[r])||void 0===u?void 0:u[a];if(console.log("Clicked square:",{row:r,col:a,piece:p}),console.log("Game state:",{currentPlayer:e.currentPlayer,selectedSquare:t,validMoves:s}),!t){if(!p)return void console.log("Clicked empty square");if(!("red"===e.currentPlayer&&"r"===p.toLowerCase()||"black"===e.currentPlayer&&"b"===p.toLowerCase()))return void alert("You can only move your own pieces!");const o=c(r,a);return console.log("Calculated valid moves:",o),0===o.length?void alert("This piece has no valid moves!"):(n({row:r,col:a,piece:p}),void l(o))}if(t.row===r&&t.col===a)return console.log("Deselecting piece"),n(null),void l([]);const m=s.some(e=>e.row===r&&e.col===a);if(console.log("Move validation:",{isValidDestination:m,selectedSquare:t,targetSquare:{row:r,col:a}}),!m)return console.log("Invalid move - not in valid moves list"),n(null),void l([]);try{const s={fromRow:t.row,fromCol:t.col,toRow:r,toCol:a};console.log("Sending move to API:",s);const d=await fetch("".concat(i,"/games/").concat(e.gameId),{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"cors",body:JSON.stringify(s)});if(!d.ok){const e=await d.json();throw console.error("API Error:",{status:d.status,statusText:d.statusText,errorData:e}),new Error(e.error||"Invalid move")}const u=await d.json();console.log("Move successful:",u),o(u),u.hasMoreJumps?(n({row:r,col:a,piece:u.board[r][a]}),l(c(r,a))):(n(null),l([]))}catch(f){console.error("Error making move:",f),alert(f instanceof Error?f.message:"Invalid move. Please try again."),n(null),l([])}})(d,u),style:{width:"60px",height:"60px",backgroundColor:p?"#666":"#fff",border:m?"3px solid yellow":"1px solid #999",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",position:"relative",boxSizing:"border-box"}},r&&a.a.createElement("div",{style:{width:"80%",height:"80%",borderRadius:"50%",backgroundColor:"r"===r.toLowerCase()?"#ff4444":"#333",border:"2px solid #fff",boxShadow:"0 0 10px rgba(0,0,0,0.3)",position:"relative"}},r===r.toUpperCase()&&a.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"r"===r.toLowerCase()?"#ffcccc":"#666",fontSize:"24px"}},"\u2654")),f&&a.a.createElement("div",{style:{position:"absolute",width:"20px",height:"20px",borderRadius:"50%",backgroundColor:"rgba(0, 255, 0, 0.5)",border:"2px solid rgba(0, 255, 0, 0.8)"}}))})))),a.a.createElement("div",{style:{marginTop:"20px"}},a.a.createElement("button",{onClick:async()=>{try{const t=await fetch("".concat(i,"/games"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"cors"});if(!t.ok)throw new Error("Failed to create game");const r=await t.json();console.log("New game state:",r),o(r),n(null),l([])}catch(e){console.error("Error creating game:",e),alert("Failed to create new game. Please try again.")}},style:{padding:"10px 20px",fontSize:"16px",backgroundColor:"finished"===e.status?"#4CAF50":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:"finished"===e.status?"pointer":"not-allowed",marginBottom:"20px"},disabled:"finished"!==e.status&&""!==e.gameId},e.gameId?"finished"===e.status?"Play Again":"Game in Progress":"New Game")))};t.n(n).a.createRoot(document.getElementById("root")).render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(s,null)))},3:function(e,o,t){e.exports=t(12)}},[[3,1,2]]]);
//# sourceMappingURL=main.757f4257.chunk.js.map